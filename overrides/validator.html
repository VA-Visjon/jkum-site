{#-
  This file was automatically generated - do not edit
-#}
{% extends "main.html" %}
{% block tabs %}
  {{ super() }}
  <section class="mdx-container validator-bg">
    <div class="banner-content">
      <h3 class="text-shadow">Validate your JKUM file</h3>
      <p class="text-shadow">Upload your file and test it against one of the schema definition files in the valid standard.</p>

<!--      <div id="safeTimer">-->
<!--        <p id="safeTimerDisplay">00:00</p>-->
<!--      </div>-->
      <div class="md-grid">
        <form class="box" method="post" action="" enctype="multipart/form-data" style="cursor: pointer;" onclick="document.getElementById('file').click();">
          <div class="box__input" >
            <input class="box__file" type="file" name="files[]" id="file" />
            <label><strong>Choose a file</strong><span class="box__dragndrop"> or drag it here</span>.</label>
            <button class="box__button" type="submit">Upload</button>
          </div>
        </form>
        <div class="grid">
          <label class="card">
            <input name="schema" class="radio" type="radio" value="jkum-schema-1.0.json" checked/>

            <span class="card-contents">
              <span class="card-type">JKUM</span>
              <span class="card-header">Standard</span>
              <span class="file-name">jkum-schema-1.0.json</span>
              <span>The JKUM standard at its core. No use-specific requirements</span>
            </span>
          </label>
          <label class="card">
            <input name="schema" class="radio" type="radio" value="jkum-basal-schema-1.0.json" />
            <span class="card-contents" aria-hidden="true">
              <span class="card-type">Basal</span>
              <span class="card-header">Kumfigurator API</span>
              <span class="file-name">jkum-basal-schema-1.0.json</span>
              <span>Schema definition for requirements related to API kumfigurator.</span>
            </span>
          </label>
        </div>
      </div>
    </div>
  </section>

  <section class="mdx-container" id="sidebar-main" style="position:relative;">
    <!-- <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
      <a href="#">About</a>
      <a href="#">Services</a>
      <a href="#">Clients</a>
      <a href="#">Contact</a>
    </div> -->
    <div class="md-grid">
      <div class="md-content__inner">
        <div class="flex-container md-typeset">
          <!-- <div>
            <button class="openbtn" onclick="toggleNav()">☰ Open Sidebar</button><br />
          </div> -->
          <div style="width: 50%;">
            <button class="undoredo-btn" onclick="undoEdit();" id="undo">
              <span class="twemoji">
                {% include ".icons/material/undo.svg" %}
              </span>
            </button>
            <button class="undoredo-btn" onclick="redoEdit();" id="redo">
              <span class="twemoji">
                {% include ".icons/material/redo.svg" %}
              </span>
            </button>
            <button class="md-button" onclick="formatContents();">Prettify</button>
            <button class="md-button" onclick="validateSchema();">Validate</button>
            <div class="alert-error" id="formatting_error"></div>
            <pre class="md-jsonarea" id="upload_file_presentation" oninput="updateRaw()" spellcheck="false" contenteditable>
{
  "head": {
    "epsg": 25832
  },
  "manholes": [
    {
      "guid": "03de0a00-d6c0-4cb4-81bd-8f6ebdfad7a6",
      "shape": "Circular",
      "diameter": 1600,
      "bottomCenter": {
        "east": 588447.01,
        "north": 6642743.66,
        "elevation": 53.04
      },
      "lids": [
        {
          "guid": "216e1618-bdf4-4ade-8Bg9-h9BBs34df115",
          "diameter": 650,
          "position": {
            "east": 588447.155,
            "north": 6642743.826,
            "elevation": 55.145
          }
        }
      ]
    }
  ]
}
            </pre>
            <textarea style="display: none;" id="upload_file"></textarea>
          </div>
          <div class="report-container" style="width: 50%;">
            <h2 class="report-header">Validation report</h2>
            <p class="report-info">Run Validate in order to process the JSON-contents</p>
            <div class="report-container" id="schema-report">
            </div>
          </div>
    <!--      <div id="map" class="map-wrapper" />-->
        </div>
      </div>
    </div>
  </section>
{% endblock %}
{% block content %}{% endblock %}
{% block scripts %}
  {{ super() }}
  <script src="{{ 'assets/javascripts/json-highlighting.js' | url }}"></script>
  <script src="{{ 'assets/javascripts/drag-and-drop.js' | url }}"></script>
  <script type="module" src="{{ 'assets/javascripts/m.json-validator.js' | url }}"></script>
  <script src="{{ 'assets/javascripts/json-validate.js' | url }}"></script>
  <script src="{{ 'assets/javascripts/json-editor.js' | url }}"></script>

  <script>
    // From drag-and-drop
    document$.subscribe(initDragAndDrop)
    // To expose modules
    const modules = {};
  </script>

  <script>
  let isOpen = false;
  function toggleNav() {
    if(isOpen){
      closeNav();
    }
    else {
      openNav();
    }
    isOpen = !isOpen;
  }

  function openNav() {
    document.getElementById("mySidebar").style.width = "250px";
    document.getElementById("sidebar-main").style.marginLeft = "250px";
  }

  function closeNav() {
    document.getElementById("mySidebar").style.width = "0";
    document.getElementById("sidebar-main").style.marginLeft= "0";
  }

  </script>

  <script type="module">
    import { validateJson } from "/assets/javascripts/m.json-validator.js";
    modules.validateJson = validateJson;
  </script>
{% endblock %}